(function () {
    'use strict';

    theApp
        .factory('DashboardService', DashboardService);

    DashboardService.$inject = ['$rootScope', '$http', '$q'];
    function DashboardService($rootScope, $http, $q) {
        var service = {};
        var url = API_URL + 'createorder';
        console.log("url = " + url);
        
        service.sendCreateOrder = sendCreateOrder;
        return service;

        function sendCreateOrder(amount, items){
            
            var dtJSON = {
                amount: amount,                            
                items: items
            };
            var dt = JSON.stringify(dtJSON);
            var data = $.param({
                data: dt
            }); 

            return $http.post(url, data).then(handleSuccess, handleError('Error send createorder'));
        }
       
        function handleSuccess(res) {
            console.log('success');
            return res.data;
        }

        function handleError(error) {            
            return function () {
                
                console.log('fail');                
                return { err: -2, msg: error };
            };
        }
       
    }
    
})();
